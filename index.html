<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å‡ºç™ºæ™‚é–“è¨ˆç®—ãƒ„ãƒ¼ãƒ«</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { background-color: #fffaf0; }
        .input-card { background: white; border-radius: 1.25rem; box-shadow: 0 4px 20px -5px rgba(180, 83, 9, 0.15); }
        /* ãƒ‘ã‚¿ãƒ¼ãƒ³â‘ ï¼šæ¸©ã‹ã„ã‚ªãƒ¬ãƒ³ã‚¸ç³»ã®ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ */
        .result-card-1 { background: linear-gradient(135deg, #f59e0b 0%, #ea580c 100%); }
        /* ãƒ‘ã‚¿ãƒ¼ãƒ³â‘¡ï¼šæŸ”ã‚‰ã‹ãªãƒ­ãƒ¼ã‚ºãƒ»ãƒ†ãƒ©ã‚³ãƒƒã‚¿ç³»ã®ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ */
        .result-card-2 { background: linear-gradient(135deg, #fb923c 0%, #db2777 100%); }
        
        /* ã‚¹ãƒãƒ›ã®å…¥åŠ›æ¬„ãŒã¯ã¿å‡ºã•ãªã„ãŸã‚ã®èª¿æ•´ */
        input[type="time"] {
            appearance: none;
            -webkit-appearance: none;
            min-height: 3rem;
        }
    </style>
</head>
<body class="p-4 sm:p-6 md:p-8 min-h-screen flex items-center justify-center">
    <div class="w-full max-w-md mx-auto space-y-6">
        <!-- Header -->
        <div class="text-center space-y-1">
            <h1 class="text-2xl font-bold text-orange-900 leading-tight">â˜€ï¸ å‡ºç™ºæ™‚é–“è¨ˆç®—å…ˆç”Ÿ</h1>
            <p class="text-xs sm:text-sm text-orange-700/70">ã‚†ã¨ã‚Šã‚’æŒã£ã¦ã€å¿ƒåœ°ã‚ˆã„å‡ºç™ºã‚’ã€‚</p>
        </div>

        <!-- Main Inputs -->
        <div class="input-card p-5 sm:p-6 space-y-5 border border-orange-100">
            <div class="w-full">
                <label class="block text-sm font-bold text-orange-900 mb-1.5">ğŸ¯ ç›®æ¨™ã®åˆ°ç€æ™‚é–“</label>
                <input type="time" id="arrivalTime" value="09:00" onchange="calculate()" 
                    class="w-full p-3 border border-orange-200 rounded-xl text-lg focus:ring-2 focus:ring-orange-400 focus:outline-none text-slate-700 bg-orange-50/30">
            </div>

            <div class="w-full">
                <label class="block text-sm font-bold text-orange-900 mb-1.5">â±ï¸ é€šå¸¸ã®ç§»å‹•æ™‚é–“</label>
                <div class="flex items-center gap-2">
                    <div class="flex-1 flex items-center gap-1.5">
                        <input type="number" id="travelH" value="1" min="0" oninput="calculate()" 
                            class="w-full p-3 border border-orange-200 rounded-xl text-center text-lg focus:ring-2 focus:ring-orange-400 focus:outline-none text-slate-700">
                        <span class="text-orange-800/60 font-bold text-sm">h</span>
                    </div>
                    <div class="flex-1 flex items-center gap-1.5">
                        <input type="number" id="travelM" value="0" min="0" max="59" oninput="calculate()" 
                            class="w-full p-3 border border-orange-200 rounded-xl text-center text-lg focus:ring-2 focus:ring-orange-400 focus:outline-none text-slate-700">
                        <span class="text-orange-800/60 font-bold text-sm">m</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Pattern 1: Fixed Early Arrival -->
        <div class="result-card-1 p-5 sm:p-6 rounded-3xl text-white shadow-xl shadow-orange-200/50 relative overflow-hidden">
            <div class="flex flex-wrap justify-between items-center gap-2 mb-4">
                <span class="text-[10px] sm:text-xs font-black bg-white/20 px-3 py-1 rounded-full border border-white/30 whitespace-nowrap uppercase tracking-wider">Plan A: Early Arrival</span>
                <div class="flex items-center gap-1 bg-black/10 rounded-lg p-1">
                    <input type="number" id="earlyM" value="15" min="0" oninput="calculate()" 
                        class="w-10 bg-transparent border-none text-center text-white font-black text-sm focus:ring-0 p-0">
                    <span class="text-[10px] font-bold pr-1">åˆ†å‰ç€</span>
                </div>
            </div>
            <div class="text-center">
                <p class="text-[10px] uppercase tracking-[0.2em] opacity-80 mb-1 font-bold">Departure Time</p>
                <div id="result1" class="text-5xl sm:text-6xl font-black tracking-tighter">--:--</div>
            </div>
        </div>

        <!-- Pattern 2: Multiplier Buffer -->
        <div class="result-card-2 p-5 sm:p-6 rounded-3xl text-white shadow-xl shadow-rose-200/50 relative overflow-hidden">
            <div class="flex flex-wrap justify-between items-center gap-2 mb-4">
                <span class="text-[10px] sm:text-xs font-black bg-white/20 px-3 py-1 rounded-full border border-white/30 whitespace-nowrap uppercase tracking-wider">Plan B: Safety Buffer</span>
                <div class="flex items-center gap-1 bg-black/10 rounded-lg p-1">
                    <input type="number" id="bufferFactor" value="1.5" step="0.1" min="1.0" oninput="calculate()" 
                        class="w-10 bg-transparent border-none text-center text-white font-black text-sm focus:ring-0 p-0">
                    <span class="text-[10px] font-bold pr-1">å€ä½™è£•</span>
                </div>
            </div>
            <div class="text-center">
                <p class="text-[10px] uppercase tracking-[0.2em] opacity-80 mb-1 font-bold">Departure Time</p>
                <div id="result2" class="text-5xl sm:text-6xl font-black tracking-tighter">--:--</div>
            </div>
            <div class="mt-4 px-3 py-1.5 bg-black/10 rounded-full">
                <p id="bufferText" class="text-[9px] sm:text-[10px] text-center font-bold opacity-90 leading-tight"></p>
            </div>
        </div>

        <!-- Footer Info -->
        <div class="text-center pt-2">
            <p class="text-[10px] text-orange-800/40 font-medium italic">Have a nice trip! â˜•</p>
        </div>
    </div>

    <script>
        function calculate() {
            const arrival = document.getElementById('arrivalTime').value;
            const travelH = parseInt(document.getElementById('travelH').value) || 0;
            const travelM = parseInt(document.getElementById('travelM').value) || 0;
            const earlyM = parseInt(document.getElementById('earlyM').value) || 0;
            const factor = parseFloat(document.getElementById('bufferFactor').value) || 1.0;

            if (!arrival) return;

            const [arrH, arrM] = arrival.split(':').map(Number);
            const arrivalTotalMinutes = arrH * 60 + arrM;
            const baseTravelMinutes = (travelH * 60) + travelM;

            // ãƒ‘ã‚¿ãƒ¼ãƒ³1
            let result1Minutes = arrivalTotalMinutes - baseTravelMinutes - earlyM;
            while (result1Minutes < 0) result1Minutes += 1440;

            // ãƒ‘ã‚¿ãƒ¼ãƒ³2
            const bufferedTravelMinutes = Math.round(baseTravelMinutes * factor);
            let result2Minutes = arrivalTotalMinutes - bufferedTravelMinutes;
            while (result2Minutes < 0) result2Minutes += 1440;

            const format = (num) => num.toString().padStart(2, '0');
            
            const r1H = Math.floor(result1Minutes / 60) % 24;
            const r1M = result1Minutes % 60;
            document.getElementById('result1').innerText = `${format(r1H)}:${format(r1M)}`;

            const r2H = Math.floor(result2Minutes / 60) % 24;
            const r2M = result2Minutes % 60;
            document.getElementById('result2').innerText = `${format(r2H)}:${format(r2M)}`;
            document.getElementById('bufferText').innerText = `ç§»å‹•æ™‚é–“ã‚’é€šå¸¸ã‚ˆã‚Š ${bufferedTravelMinutes - baseTravelMinutes} åˆ†å¤šãè¦‹ç©ã‚‚ã£ã¦ã„ã¾ã™`;
        }
        calculate();
    </script>
</body>
</html>
